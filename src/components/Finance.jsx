import React,{useEffect,useState} from 'react'; import { safeGet } from '../api'; import Toolbar from './Toolbar';
export default function Finance(){ const [gl,setGl]=useState([]); const [ap,setAp]=useState([]); const [ar,setAr]=useState([]); const [budgets,setBudgets]=useState([]); const [fixed,setFixed]=useState([]); const [tax,setTax]=useState([]); const [fx,setFx]=useState([]); const [forecasts,setForecasts]=useState([]);
  useEffect(()=>{ safeGet('/api/finance/gl_accounts','gl_accounts').then(setGl); safeGet('/api/finance/ap','ap').then(setAp); safeGet('/api/finance/ar','ar').then(setAr); safeGet('/api/finance/budgets','budgets').then(setBudgets); safeGet('/api/finance/fixed_assets','fixed_assets').then(setFixed); safeGet('/api/finance/tax_records','tax_records').then(setTax); safeGet('/api/finance/fx_rates','fx_rates').then(setFx); safeGet('/api/finance/forecasts','forecasts').then(setForecasts); },[]);
  return (<div><div className='card'><h3>General Ledger</h3><Toolbar onNew={()=>alert('Create GL via API')} onEdit={()=>{}} onDelete={()=>{}} onSearch={q=>{}} filterOptions={[{value:'contains',label:'Contains'}]}/><table className='table'><thead><tr><th>Code</th><th>Name</th><th>Type</th><th>Balance</th></tr></thead><tbody>{gl.map(a=> <tr key={a.id}><td>{a.code}</td><td>{a.name}</td><td>{a.type}</td><td>{a.balance}</td></tr>)}</tbody></table></div><div className='card'><h3>Accounts Payable</h3><table className='table'><thead><tr><th>ID</th><th>Vendor</th><th>Invoice</th><th>Amount</th><th>Due</th></tr></thead><tbody>{ap.map(x=> <tr key={x.id}><td>{x.id}</td><td>{x.vendor_id}</td><td>{x.invoice_number}</td><td>{x.amount}</td><td>{x.due_date? x.due_date.slice(0,10):''}</td></tr>)}</tbody></table></div><div className='card'><h3>Accounts Receivable</h3><table className='table'><thead><tr><th>ID</th><th>Customer</th><th>Invoice</th><th>Amount</th><th>Due</th></tr></thead><tbody>{ar.map(x=> <tr key={x.id}><td>{x.id}</td><td>{x.customer_id}</td><td>{x.invoice_number}</td><td>{x.amount}</td><td>{x.due_date? x.due_date.slice(0,10):''}</td></tr>)}</tbody></table></div><div className='card'><h3>Budgets</h3><table className='table'><thead><tr><th>ID</th><th>Name</th><th>Year</th><th>Dept</th><th>Total</th></tr></thead><tbody>{budgets.map(b=> <tr key={b.id}><td>{b.id}</td><td>{b.name}</td><td>{b.fiscal_year}</td><td>{b.department}</td><td>{b.total_amount}</td></tr>)}</tbody></table></div><div className='card'><h3>Fixed Assets</h3><table className='table'><thead><tr><th>ID</th><th>Tag</th><th>Description</th><th>Net Value</th></tr></thead><tbody>{fixed.map(f=> <tr key={f.id}><td>{f.id}</td><td>{f.tag}</td><td>{f.description}</td><td>{f.net_value}</td></tr>)}</tbody></table></div><div className='card'><h3>FX Rates</h3><table className='table'><thead><tr><th>ID</th><th>Currency</th><th>Rate</th><th>Date</th></tr></thead><tbody>{fx.map(r=> <tr key={r.id}><td>{r.id}</td><td>{r.currency}</td><td>{r.rate_to_base}</td><td>{r.date}</td></tr>)}</tbody></table></div></div>); }
